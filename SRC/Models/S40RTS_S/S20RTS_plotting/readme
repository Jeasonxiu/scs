------------------------------------------------------
November 2010.

What's new since S20RTS?

(1) In addition to S20RTS there is now a new model S40RTS.
See Ritsema et al, GJI, 2011.

The S40RTS.sph is the new model file for S40RTS.
Simply replace S20RTS.sph by S40RTS in mkmap and crossect_180.o

(2) There are tronger-damped or weaker-damped versions of S40RTS available.
See the directory "Models/"
S40RTS is based on N=8000 effective unknowns (the trace of the resolution matrix).
You can select other models based on higher dampings values (i.e., fewer unknowns)
and lower dampings values (i.e., more unknowns).
Checkerboard-type test and Backus-Gilbert resolution
kernels can be computed using the ".evc" file.
This file is big, so we need to find a clever mechanism to transport it.
Contact me if you are interested in pursuing this.
See Ritsema et al., JGR 2007 and Schuberth et al., 2009 for examples.
------------------------------------------------------

------------------------------------------------------
S20RTS/S40RTS -- plotting of cross-section and maps --
------------------------------------------------------

"crosssect_180" and "mkmap" are c-shell scripts
that produce, respectively, 180-deg wide
cross-sections and maps through model S20RTS
(or other models by Ritsema/VanHeijst with the ".sph" trailor).
The figures are in PostScript format, which can be viewed
on a Unix machine with "gs", "Ghostscript", or "Ghostview"
(see for example "http://www.cs.wisc.edu/~ghost/"
Alternatively, you can turn PostScript into PDF using "ps2pdf".

"crosssect_180" and "mkmap" are using, respectively, the scripts "slice_180"
and "plmap", which include plenty of comment-statements that
should be helpful to explain what's going on ...

Before running "cross-sect" or "mkmap", you must:

(A) Define the global environment TOMO_S20RTS that
points to the location of the installation directory:
If you use Bash, add the line:
 "export TOMO_S20RTS=installation-directory" 
to your .bashrc
If you use C-shell, add the line:
 "setenv TOMO_S20RTS installation-directory"
to your .cshrc
(Type "echo $SHELL" to find out which shell you are running.)

(B) --- Compile the library
Goto "lib/libS20" and run "make"
This should create: "lib/libS20.a"

(C) --- Compile codes
Goto "src" and run "make all"
A total of 8 executables should have been created in "bin".

(NOTE FOR SOLARIS USERS !!!)
The code src/calc.c is a simple calculator,
that may not compile on a SUN machine because
it uses the function "rintf".
If you use SOLARIS, you may have to substitute
"rintf" by "nint" in several lines.
(Sorry, I haven't come up with a more elegant solution ...)

You're now ready to go! 

Some variables:
(1) "S20RTS.sph" is the model
(2) "gu12.chj" is a colour palette from Yu Gu (Harvard)
I use tomogrey6 for back-and-white.
Other colour palletes are given in the directory "colourscales".
(3) "plate_boundaries.gmt" is the plate boundaries files
(4) "Sleep_hotspots.list" are hotspot locations from Sleep [1990]
(5) Plotting of hotspots, plate_boundaries, grid-contours
can be turned off in the scripts "slice_180" and "plmap".
(6) The directory "scripts" includes the script "mkc" used in "slice_180".
(7) The directory "horizons" includes ".xy" files of
discontinuities in the Earth (e.g., core, 670-km) used in "slice_180".

#---------------------------------------------------
CROSS-SECTIONS

Run "crossect_180" as follows:

prompt> crossect_180 LAT LON AZ [CODE]

where
	LAT/LON= the midpoint of the crossection,
        AZ= azimuth clockwise from north
        CODE= file-identifier [optional]

If CODE is specified, 
PostScript output is "${CODE}.ps"
otherwise,
PostScript output is "slice.ps"

For example:

prompt> crossect_180 27 -142 75 pacific_america

The PostScript file: "JR_pacific_america.ps"
show the cross-section through [lat=27,lon=-142]
with an azimuth of 75 (clockwise from north).
generated by the example given above. 
#---------------------------------------------------

#---------------------------------------------------
MAPS

Run "mkmap" as follows:

prompt> mkmap MAXC DEP

where
        MAXC is the maximum VALUE of dVs;
        shear velocity variations between
        -(MAXC)% and +(MAXC)% will be plotted
        DEP is depth in the mantle

PostScript output is "map.{DEP}km.ps"
Ascii      output is "map.{DEP}km.xyz"
#---------------------------------------------------


Please let me know if you have problems.

Jeroen Ritsema
jritsema@umich.edu


